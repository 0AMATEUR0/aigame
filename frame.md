               ┌─────────────────┐
               │   GameEngine    │  ← 统一调度主循环
               └───────┬─────────┘
                       │
        ┌──────────────┼───────────────┐
        │              │               │
        ▼              ▼               ▼
 ┌───────────┐   ┌───────────┐   ┌───────────┐
 │ MapManager│   │EventManager│   │BattleManager│
 │───────────│   │───────────│   │────────────│
 │地图生成   │   │事件检测   │   │战斗逻辑    │
 │玩家探索   │   │触发战斗   │   │伤害计算    │
 │状态保存   │   │奖励/解锁 │   │角色状态更新│
 └─────┬─────┘   └─────┬─────┘   └─────┬─────┘
       │              │                │
       ▼              ▼                ▼
 ┌───────────┐   ┌───────────┐   ┌───────────┐
 │ Map Data  │   │ Event Data │   │ Character │
 │ JSON/配置 │   │ JSON/配置 │   │ JSON/对象 │
 │ 随机状态 │   │ 奖励/剧情 │   │ HP/技能  │
 └───────────┘   └───────────┘   └───────────┘
